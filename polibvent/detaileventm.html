<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detail Event Kampus</title>
  <link rel="stylesheet" href="detaileventm.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div>
      <i class="fas fa-spinner fa-spin"></i>
      <span id="loadingText">Memproses...</span>
    </div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="logo"><img src="picture/logo event.png" alt="Logo Event"></div>
    <div class="header-buttons">
      <a href="index.html" class="btn-home">Beranda</a>
      <button id="editEventBtn" class="btn-edit">Edit Event</button>
      <a href="loginadmin.html" class="btn-masuk">Masuk</a>
    </div>
  </header>

  <!-- Konten Utama -->
  <main class="container">
    <div id="errorMessage" class="error-message"></div>
    <div id="successMessage" class="success-message"></div>
    <div id="warningMessage" class="warning-message"></div>
    
    <!-- Data Issues Warning -->
    <div id="dataIssuesWarning" class="data-issue-warning hidden">
      <i class="fas fa-exclamation-triangle"></i>
      <strong>Peringatan Data:</strong> Terdeteksi masalah dalam data event. Beberapa informasi mungkin tidak ditampilkan dengan benar.
    </div>
    
    <!-- Debug Info -->
    <div id="debugInfo" class="debug-info hidden"></div>
    <div id="serverResponse" class="server-response hidden"></div>
    
    <section class="info-event">
      <h1 id="eventTitle">Memuat Event...</h1>

      <p><strong>Tanggal</strong><br>
        <span id="eventDate">-</span>
      </p>

      <p><strong>Waktu</strong><br>
        <span id="eventTime">-</span>
      </p>

      <p><strong>Lokasi</strong><br>
        <span id="eventLocation">-</span>
      </p>

      <p><strong>Status</strong><br>
        <span id="eventStatus">-</span>
      </p>

      <p><strong>Deskripsi</strong><br>
        <span id="eventDescription">Memuat deskripsi event...</span>
      </p>
    </section>

    <aside class="poster-container">
      <img id="eventPoster" src="picture/default.jpg" alt="Poster Event" class="poster-img">
    </aside>
  </main>

  <!-- Edit Event Modal -->
  <div class="modal" id="editEventModal">
    <div class="modal-content">
      <h3><i class="fas fa-edit"></i> Edit Event</h3>
      
      <div id="editErrorMessage" class="error-message"></div>
      <div id="editSuccessMessage" class="success-message"></div>
      <div id="editWarningMessage" class="warning-message"></div>
      
      <!-- Server Response Debug -->
      <div id="editServerResponse" class="server-response hidden"></div>
      
      <form id="editEventForm">
        <input type="hidden" id="editEventId" name="id">
        
        <div class="form-group">
          <label for="editTitle">Judul Event *</label>
          <input type="text" id="editTitle" name="title" required placeholder="Masukkan judul event">
          <small class="error" id="editTitleError"></small>
        </div>
        
        <div class="form-group">
          <label for="editPoster">Poster Event</label>
          <input type="file" id="editPoster" name="poster" accept="image/*">
          <img id="editPosterPreview" src="" style="max-width:100%; margin-top:10px; display:none; border-radius:8px;">
          <small>Kosongkan jika tidak ingin mengubah poster (Maksimal 2MB, format: JPG, PNG, GIF)</small>
          <small class="error" id="editPosterError"></small>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="editStartDate">Tanggal Mulai *</label>
            <input type="date" id="editStartDate" name="start_date" required>
            <small class="error" id="editStartDateError"></small>
          </div>
          <div class="form-group">
            <label for="editEndDate">Tanggal Selesai *</label>
            <input type="date" id="editEndDate" name="end_date" required>
            <small class="error" id="editEndDateError"></small>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="editStartTime">Waktu Mulai *</label>
            <input type="time" id="editStartTime" name="start_time" required>
            <small class="error" id="editStartTimeError"></small>
          </div>
          <div class="form-group">
            <label for="editEndTime">Waktu Selesai *</label>
            <input type="time" id="editEndTime" name="end_time" required>
            <small class="error" id="editEndTimeError"></small>
          </div>
        </div>
        
        <div class="form-group">
          <label for="editLocation">Lokasi *</label>
          <input type="text" id="editLocation" name="location" required placeholder="Masukkan lokasi event">
          <small class="error" id="editLocationError"></small>
        </div>
        
        <div class="form-group">
          <label for="editDescription">Deskripsi *</label>
          <textarea id="editDescription" name="description" required placeholder="Masukkan deskripsi event" rows="4"></textarea>
          <small class="error" id="editDescriptionError"></small>
        </div>
        
        <!-- HANYA STATUS YANG BISA DIEDIT USER -->
        <div class="form-group">
          <label for="editStatus">Status</label>
          <select id="editStatus" name="status">
            <option value="Aktif">Aktif</option>
            <option value="Nonaktif">Nonaktif</option>
          </select>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-submit" id="submitEditBtn">
            <i class="fas fa-save"></i> Simpan Perubahan
          </button>
          <button type="button" class="btn-cancel" id="cancelEditEvent">
            <i class="fas fa-times"></i> Batal
          </button>
          <button type="button" class="btn-debug hidden" id="debugBtn">
            <i class="fas fa-bug"></i> Debug
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Load JavaScript -->
  <script src="detailevent.js"></script>
</body>
</html>